<div class="order-tracking-container">
  <a routerLink="/menu" class="back-link">‚Üê Back to Menu</a>

  <div *ngIf="currentOrder; else noOrder">
    <!-- Order Status -->
    <section class="card">
      <div class="card-header">
        <div class="order-header">
          <div>
            <h2>Order #{{ currentOrder.id }}</h2>
            <p>
              Placed on {{ currentOrder.orderTime | date: 'medium' }}
            </p>
          </div>
          <span class="badge">{{ currentOrder.status | titlecase }}</span>
        </div>
      </div>

      <div class="card-content">
        <div class="status-section">
          <div class="status-icon">
            <i
              [ngClass]="{
                'received': currentOrder.status === 'received',
                'preparing': currentOrder.status === 'preparing',
                'ready': currentOrder.status === 'ready',
                'completed': currentOrder.status === 'completed'
              }"
            >
              
            </i>
            <span class="logo"></span>
          </div>
          <div class="status-info">
            <h3>{{ currentOrder.status | titlecase }}</h3>
            <p>{{ getStatusMessage(currentOrder.status) }}</p>
            <div class="progress-bar">
              <div
                class="progress-fill"
                [style.width.%]="getProgressValue(currentOrder.status)"
              ></div>
            </div>
          </div>
        </div>

        <!-- Status Timeline -->
        <div class="status-timeline">
          <div class="status-step" [class.active]="isStepActive('received')">
            <div class="step-circle">‚úî</div>
            <p>Received</p>
          </div>
          <div class="status-step" [class.active]="isStepActive('preparing')">
            <div class="step-circle">üë®‚Äçüç≥</div>
            <p>Preparing</p>
          </div>
          <div class="status-step" [class.active]="isStepActive('ready')">
            <div class="step-circle">üì¶</div>
            <p>Ready</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Pickup Information -->
    <section class="card">
      <h3>‚è∞ Pickup Information</h3>
      <div class="pickup-grid">
        <div>
          <h4>Pickup Time</h4>
          <p>{{ currentOrder.pickupTime }}</p>
        </div>
        <div>
          <h4>Location</h4>
          <p>123 Coffee Street, Bean City</p>
        </div>
        <div>
          <h4>Order For</h4>
          <p>{{ currentOrder.customerInfo.name }}</p>
        </div>
        <div>
          <h4>Payment Method</h4>
          <p>{{ currentOrder.paymentMethod === 'card' ? 'Credit/Debit Card' : 'Pay at Pickup' }}</p>
        </div>
      </div>
    </section>

    <!-- Order Details -->
    <section class="card">
      <h3>Order Details</h3>
      <div *ngFor="let item of currentOrder.items" class="order-item">
        <div>
          <strong>{{ item.name }}</strong>
          <p>Qty: {{ item.quantity }} √ó ${{ item.price.toFixed(2) }}</p>
        </div>
        <span>${{ (item.price * item.quantity).toFixed(2) }}</span>
      </div>

      <hr>

      <div class="summary-line">
        <span>Subtotal</span>
        <span>${{ (currentOrder.total / 1.08).toFixed(2) }}</span>
      </div>
      <div class="summary-line">
        <span>Tax (8%)</span>
        <span>${{ ((currentOrder.total / 1.08) * 0.08).toFixed(2) }}</span>
      </div>
      <div class="summary-total">
        <strong>Total</strong>
        <strong>${{ currentOrder.total.toFixed(2) }}</strong>
      </div>
    </section>
  </div>

  <!-- If no order -->
  <ng-template #noOrder>
    <div class="no-order">
      <p class="icon">üëú</p>
      <h2>No Active Order</h2>
      <p>You don't have any active orders at the moment.</p>
      <button class="back-btn" routerLink="/menu">Browse Menu</button>
    </div>
  </ng-template>
</div>
